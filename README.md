1. **Constructor**:
   - รับพารามิเตอร์เพื่อกำหนดจำนวนผู้เข้าร่วม (numParticipants) และเวลา (T1 และ T2) สำหรับขั้นตอนต่าง ๆ ของ Contract Lottery

2. **Commit**:
   - ส่งเงิน 0.001 ether พร้อมกับค่าที่ต้องการ commit สำหรับผู้เข้าร่วม
   - ตรวจสอบเงื่อนไขต่าง ๆ ก่อนการ commit เช่น ระยะเวลา commit และค่าที่ต้องการ commit
   - เพิ่มจำนวนเงินใน pot และบันทึกการ commit และค่าที่ commit ของผู้เล่น

3. **Reveal**:
   - ตรวจสอบเงื่อนไขต่าง ๆ ก่อนการ reveal เช่น ระยะเวลา reveal และการ commit ของเล่น
   - บันทึกการ reveal และค่าที่ reveal ของผู้เล่น และเปลี่ยน stage ในกรณีที่ผู้เล่น reveal ทันเวลาและไม่มีผู้ชนะตามกฎ

4. **Determine Winner**:
   - มีการตรวจสอบเงื่อนไขในการกำหนดผู้ชนะ โดยใช้การ bitwise XOR เพื่อหาผู้ชนะ
   - ทำการแจกเงินให้ผู้ชนะหรือผู้เข้าร่วมทั้งหมดตามเงื่อนไขที่กำหนด

5. **Withdraw**:
   - มีการตรวจสอบเงื่อนไขต่าง ๆ ก่อนการถอน เช่น stage และการ reveal ของผู้เล่น
   - โอนเงินคืนให้กับผู้เข้าร่วม Lottery และบันทึกการถอนเงินของผู้เล่น